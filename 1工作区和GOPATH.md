# 3个环境变量

* GOROOT: Go语言安装根目录的路径，也就是GO语言的安装路径。
* GOPATH: 若干工作区目录的路径。是我们自己定义的`工作空间`。
* GOBIN: GO程序生成的可执行文件的路径。


## 面试问题：你知道设置GOPATH有什么意义吗？

经典回答：你可以把GOPATH简单理解成Go语言的工作目录，它的值是一个目录的路径，也可以是多个目录路径，每个目录代表Go语言的一个工作区（workspace）

我们需要利用这些工作区，去防止Go语言的`源码文件（source file）`以及安装后的`归档文件（archive file,也就是以“.a”为扩展名的文件）`和`可执行文件`


# 3个知识点

* 1. Go 语言源码的组织方式是怎样的；
* 2. 你是否了解源码安装后的结果（只有在安装后，Go 语言源码才能被我们或其他代码使用）
* 3. 你是否理解构建和安装 Go 程序的过程


### 1. Go 语言源码的组织方式是怎样的；

go语言的源码也是以代码包为基本组织单位的。在文件系统中，这些代码包其实是与目录一一对应。就像目录可以有子目录，所以代码包也可以有子包。

代码包的名称很一般与源文件所在的目录同名，每个代码包都会有导入历经。具体方式就是import该包的导入路径。

```go
import (
	"github.com/gin-gonic/gin"
	"net/http"
	"newland/bootstrap"
)
```

在工作区中，一个代码包的导入实际就是从src子目录，到该包的实际存储位置的相对路径。
所以说，go语言源码的组织方式以环境变量GOPATH、工作区、src目录和代码包为主线的。

### 2.你是否了解源码安装后的结果

安装后如果产生了归档文件（以“.a”为扩展名的文件），就会放进该工作区的 pkg 子目录；如果产生了可执行文件，就可能会放进该工作区的 bin 子目录

比如 ，一个已存在的代码包的导入路径是

```go
import "github.com/labstack/echo"
```

那么执行命令 

```go
go install github.com/labstack/echo
```

生成归档文件的相对目录就是 github.com/labstack 文件名为echo.a

需要记住的是，某个工作区的src子目录下的源文件在安装后一般会被放置到当前工作的pkg子目录下对应的目录中，或者被直接放置在该工作区的bin子目录中。

### 3. 你是否理解构建和安装 Go 程序的过程

构建使用go build，安装使用命令go install。构建和安装代码包的时候会被执行编译、打包等操作，并且这些操作生成的任何文件都会先被保存在某个临时的目录中。

如果构建的是库源码文件，那么操作的结果文件只会存在临时目录中。这里的构建的主要意义在于检查和验证。

如果构建的是命令源码文件，那么操作的结果文件会被搬运到源码文件所在的目录中。


### 思考题

* 1.go语言在多个工作区中查找依赖包的时候以怎样的顺序进行的？
* 2.如果在多个工作区中都存在导入路径相同的代码包会产生冲突吗？

### 补充

* 命令源码文件 `即包含main()入口函数的源码文件`
* 代码包 `package`

### 思考题
* 1.总执行顺序的角度
引入的包 -> 当前包的变量常量 -> init()[多个同一包则按照顺序执行] -> main函数

* 2.依赖包执行顺序
被依赖的总是优先执行初始化，一个包只会被初始化一次。
a引入b，b引入c，则执行顺序c -> b -> a

* 3.单个包执行顺序的角度
总的前提:按照包中源文件名的字典顺序来排序执行。
当前包排序后的变量常量 -> 排序后的init()